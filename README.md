
---

# MultiEdit Instruction Decomposer (å¤šæŒ‡ä»¤åˆ†è§£å™¨)

![Python](https://img.shields.io/badge/Python-3.11%2B-blue) ![Jieba](https://img.shields.io/badge/Dependency-Jieba-green) ![License](https://img.shields.io/badge/license-MIT-orange)

è¿™æ˜¯ä¸€ä¸ªåŸºäºè§„åˆ™å’Œ NLPï¼ˆè‡ªç„¶è¯­è¨€å¤„ç†ï¼‰çš„æŒ‡ä»¤åˆ†è§£å·¥å…·ã€‚å®ƒèƒ½å¤Ÿå°†å¤æ‚çš„è‡ªç„¶è¯­è¨€æŒ‡ä»¤ï¼ˆä¸­æ–‡æˆ–è‹±æ–‡ï¼‰è§£æä¸ºç»“æ„åŒ–çš„åŸå­æ“ä½œæ­¥éª¤ã€‚

è¯¥å·¥å…·ä¸»è¦é’ˆå¯¹ **ç‰©ä½“å±æ€§ç¼–è¾‘** åœºæ™¯ï¼ˆå¦‚ï¼šâ€œæŠŠçº¢è‰²çš„çƒå˜æˆè“è‰²â€ï¼‰ï¼Œç‰¹åˆ«é€‚ç”¨äºå›¾åƒç¼–è¾‘ç±»æ•°æ®é›†çš„é€»è¾‘å¤„ç†ã€‚

## âœ¨ æ ¸å¿ƒç‰¹æ€§

- **ğŸŒ åŒè¯­æ”¯æŒ**ï¼šå®Œç¾æ”¯æŒä¸­æ–‡å’Œè‹±æ–‡æŒ‡ä»¤è§£æã€‚
- **ğŸ”— å¤åˆæŒ‡ä»¤å¤„ç†**ï¼šèƒ½å¤Ÿå¤„ç†åŒ…å«â€œç„¶åâ€ã€â€œæ¥ç€â€ã€â€œandâ€ã€â€œthenâ€ç­‰è¿æ¥è¯çš„é•¿éš¾å¥ã€‚
- **ğŸ§© æ··åˆè§£æç­–ç•¥**ï¼š
  - **ä¸­æ–‡**ï¼šç»“åˆæ­£åˆ™è¡¨è¾¾å¼ä¸ `jieba` è¯æ€§æ ‡æ³¨ï¼Œç²¾å‡†æå–â€œæŠŠ A å˜æˆ Bâ€ç­‰å¥å¼ã€‚
  - **è‹±æ–‡**ï¼šåŸºäºå¤æ‚çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œæ”¯æŒå¤šç§è¯­æ³•ç»“æ„ï¼ˆmake X Y, change X to Y, etc.ï¼‰ã€‚
- **ğŸ›¡ï¸ å®¹é”™æ€§**ï¼šå†…ç½®é”™åˆ«å­—å…¼å®¹ï¼ˆå¦‚ grey/grayï¼‰åŠ Jieba å®‰å…¨è¡¥ä¸ã€‚

## ğŸ“¦ å®‰è£…ä¾èµ–

æœ¬é¡¹ç›®ä»…ä¾èµ– `jieba` è¿›è¡Œä¸­æ–‡åˆ†è¯ï¼Œå…¶ä»–å‡ä¸º Python æ ‡å‡†åº“ã€‚

```bash
pip install jieba
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å¼•å…¥ç±»åº“

ç¡®ä¿ `MultiEdit_Decomposer_Final.py` åœ¨ä½ çš„é¡¹ç›®ç›®å½•ä¸‹ã€‚

```python
from MultiEdit_Decomposer_Final import InstructionDecomposer

# åˆå§‹åŒ–åˆ†è§£å™¨
decomposer = InstructionDecomposer()
```

### 2. è§£ææŒ‡ä»¤

ä½¿ç”¨ `generate_decomposed_instruction` æ–¹æ³•è·å–æ ¼å¼åŒ–æ–‡æœ¬å’Œåˆ—è¡¨æ•°æ®ã€‚

```python
# ç¤ºä¾‹è¾“å…¥ï¼ˆä¸­æ–‡ï¼‰
instruction_cn = "æŠŠçº¢è‰²çš„çƒå˜æˆè“è‰²ï¼Œç„¶åå°†å°çš„æ­£æ–¹ä½“æ”¹ä¸ºç»¿è‰²"

result_text, result_list = decomposer.generate_decomposed_instruction(instruction_cn)

print(result_text)
# è¾“å‡ºæ ¼å¼åŒ–çš„é˜…è¯»æ–‡æœ¬

print(result_list)
# è¾“å‡ºåˆ—è¡¨: ['çº¢è‰²çš„çƒ â†’ è“è‰²', 'å°çš„æ­£æ–¹ä½“ â†’ ç»¿è‰²']
```

## ğŸ’¡ ä½¿ç”¨ç¤ºä¾‹ (Demos)

### ä¸­æ–‡åœºæ™¯

| è¾“å…¥æŒ‡ä»¤ | è§£æç»“æœ |
| :--- | :--- |
| `æŠŠå¤§çƒå˜æˆé‡‘è‰²` | `['å¤§çƒ â†’ é‡‘è‰²']` |
| `å°†é‡‘å±åœ†æŸ±æ”¹ä¸ºçº¢è‰²ï¼Œå¹¶æŠŠæ©¡èƒ¶æ–¹å—å˜æˆè“è‰²` | `['é‡‘å±åœ†æŸ± â†’ çº¢è‰²', 'æ©¡èƒ¶æ–¹å— â†’ è“è‰²']` |

### è‹±æ–‡åœºæ™¯

| è¾“å…¥æŒ‡ä»¤ | è§£æç»“æœ |
| :--- | :--- |
| `Make the red sphere blue` | `['red sphere â†’ blue']` |
| `Change the tiny metal cube to green and make the big ball yellow` | `['tiny metal cube â†’ green', 'big ball â†’ yellow']` |

## ğŸ› ï¸ ä»£ç ç»“æ„è¯´æ˜

- **`InstructionDecomposer`**: ä¸»ç±»ã€‚
  - `preprocess()`: æ–‡æœ¬æ¸…æ´—ï¼Œç»Ÿä¸€æ ‡ç‚¹ç¬¦å·ã€‚
  - `extract_chinese_operations()`: æ ¸å¿ƒä¸­æ–‡è§£æé€»è¾‘ï¼ˆæ­£åˆ™ä¼˜å…ˆï¼Œè¯æ€§å…œåº•ï¼‰ã€‚
  - `extract_english_operations()`: æ ¸å¿ƒè‹±æ–‡è§£æé€»è¾‘ï¼ˆåŸºäº RegEx æ¨¡å¼åŒ¹é…ï¼‰ã€‚
  - `decompose_instruction()`: å…¥å£å‡½æ•°ï¼Œè´Ÿè´£æ–­å¥ã€å»é‡å’Œæ•´åˆã€‚

## ğŸ“ è¯æ±‡è¦†ç›–

è¯¥å·¥å…·å†…ç½®äº†å¯¹ä»¥ä¸‹å±æ€§çš„è¯†åˆ«èƒ½åŠ›ï¼š

*   **é¢œè‰²**: çº¢, è“, ç»¿, é»„, é‡‘, é“¶, red, blue, green, gold...
*   **å½¢çŠ¶**: çƒ, æ–¹å—, åœ†æŸ±, sphere, cube, cylinder...
*   **æè´¨/ä¿®é¥°**: é‡‘å±, æ©¡èƒ¶, å¤§, å°, metal, rubber, big, small...

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue æˆ– Pull Request æ¥å¢åŠ æ›´å¤šçš„å¥å¼æ”¯æŒæˆ–ä¼˜åŒ–æ­£åˆ™è¡¨è¾¾å¼ï¼

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®éµå¾ª MIT è®¸å¯è¯ã€‚
